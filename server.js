// // import express from "express";
// // import cors from "cors";
// // import dotenv from "dotenv";

// // import chatRoutes from "./src/routes/chat.routes.js";
// // import messagesRoutes from "./src/routes/messages.routes.js";
// // import authRoutes from "./src/routes/auth.routes.js";
// // // import coursesRoutes from "./src/routes/courses.routes.js";
// // import leadRoutes from "./src/routes/lead.routes.js";
// // // import captchaRoutes from "./src/routes/captcha.routes.js";
// // import pool from "./src/config/db.js"; // ou ajuste caminho

// // dotenv.config();
// // const app = express();
// // const PORT = process.env.PORT || 3000;

// // // Middleware para permitir CORS
// // app.use(cors());
// // app.use(express.json());

// // //Rotas
// // app.use("/api/chat", chatRoutes);
// // app.use("/api/messages", messagesRoutes);
// // app.use("/api/auth", authRoutes);
// // // app.use("/api/courses", coursesRoutes);
// // app.use("/api/lead", leadRoutes);
// // // app.use("/api/captcha", captchaRoutes);

// // // Teste de saude da API
// // app.get("/", (req, res) => {
// //   res.send({ message: "API est√° funcionando!" });
// // });

// // app.listen(PORT, async () => {
// //   try {
// //     const [rows] = await pool.query("SELECT 1");
// //     console.log(`Conex√£o com o banco de dados OK.`);
// //   } catch (err) {
// //     console.error("Erro ao conectar no banco:", err.message);
// //   }

// //   console.log(`Servidor rodando na porta ${PORT}`);
// // });

// // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
// // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> NOVA VERS√ÉO TESTE 03/06/2025 <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
// // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

import express from "express";
import dotenv from "dotenv";
import cors from "cors";

import chatRoutes from "./src/routes/chat.routes.js";
import messagesRoutes from "./src/routes/messages.routes.js";
// import authRoutes from "./src/routes/auth.routes.js";
// import coursesRoutes from "./src/routes/courses.routes.js";
import leadRoutes from "./src/routes/lead.routes.js";
// import captchaRoutes from "./src/routes/captcha.routes.js";
import pool from "./src/config/db.js";
import { sanitizeInput } from "./src/utils/carregarCursoCsv.js";

// ============================================
// üéØ FUN√á√ÉO PRINCIPAL - sendMessage
// ============================================
export const sendMessage = async (req, res) => {
  // üõ°Ô∏è HEADERS CORS EXPL√çCITOS - ADICIONAR NO IN√çCIO
  res.header("Access-Control-Allow-Origin", "https://www.senaipr.org.br");
  res.header("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS");
  res.header(
    "Access-Control-Allow-Headers",
    "Content-Type, Authorization, X-Requested-With, Accept, Origin"
  );
  res.header("Access-Control-Allow-Credentials", "true");

  // üîç LOGS PARA DEBUG - ADICIONAR LOGO AP√ìS OS HEADERS
  console.log("üì® === IN√çCIO DA REQUISI√á√ÉO ===");
  console.log("üì® M√©todo:", req.method);
  console.log("üì® URL:", req.url);
  console.log("üì® Origin:", req.headers.origin);
  console.log("üì® Headers recebidos:", req.headers);
  console.log("üì® Body recebido:", req.body);
  console.log("üì® ===============================");

  try {
    // üìù VALIDA√á√ÉO B√ÅSICA DOS DADOS
    const { message, email } = req.body;

    if (!message || message.trim() === "") {
      console.log("‚ùå Mensagem vazia ou inv√°lida");
      return res.status(400).json({
        success: false,
        message: "Mensagem √© obrigat√≥ria",
      });
    }

    console.log(`üîç Processando mensagem: "${message}"`);
    console.log(`üìß Email do usu√°rio: ${email || "n√£o fornecido"}`);

    // üîç VERIFICAR SE √â PERGUNTA SOBRE DESCRI√á√ÉO
    if (detectarPerguntaDescricao(message)) {
      console.log("üìö Detectada pergunta sobre descri√ß√£o de curso");

      const nomeCurso = extrairNomeCursoDaPergunta(message);
      console.log(`üéØ Nome do curso extra√≠do: "${nomeCurso}"`);

      if (nomeCurso) {
        const descricao = buscarDescricaoCurso(nomeCurso);
        if (descricao) {
          console.log("‚úÖ Descri√ß√£o encontrada, retornando...");

          // Salvar no banco se tiver email
          if (email) {
            try {
              await pool.query(
                "INSERT INTO messages (email, user_message, bot_response) VALUES (?, ?, ?)",
                [email, message, descricao]
              );
              console.log("üíæ Conversa salva no banco de dados");
            } catch (dbError) {
              console.warn("‚ö†Ô∏è Erro ao salvar no banco:", dbError);
            }
          }

          return res.json({
            success: true,
            message: descricao,
            type: "description",
          });
        }
      }

      console.log("‚ùå Descri√ß√£o n√£o encontrada, seguindo para chat normal...");
    }

    // ü§ñ PROCESSAR COM OPENAI
    console.log("ü§ñ Enviando para OpenAI...");
    const botResponse = await getChatResponse(message, email);
    console.log("‚úÖ Resposta recebida da OpenAI");

    // üíæ SALVAR NO BANCO DE DADOS
    if (email) {
      try {
        await pool.query(
          "INSERT INTO messages (email, user_message, bot_response) VALUES (?, ?, ?)",
          [email, message, botResponse]
        );
        console.log("üíæ Conversa salva no banco de dados");
      } catch (dbError) {
        console.error("‚ùå Erro ao salvar no banco:", dbError);
        // N√£o retornar erro aqui, apenas logar
      }
    }

    // üéØ EXTRAIR FILTROS PARA BUSCA
    console.log("üîç Extraindo filtros da mensagem...");
    const filtros = await extrairFiltrosDeTexto(message);
    console.log("üìä Filtros extra√≠dos:", filtros);

    // üìã BUSCAR CURSOS SE HOUVER FILTROS
    let cursosEncontrados = null;
    if (filtros.curso || filtros.cidade || filtros.modalidade) {
      console.log("üîç Buscando cursos com os filtros...");
      try {
        const { cursosDisponiveis } = carregarCursosDoCSV();
        const dicionario = criarDicionarioCursos(cursosDisponiveis);
        cursosEncontrados = filtrarCursosOtimizado(dicionario, filtros);
        console.log(`üìö ${cursosEncontrados?.length || 0} cursos encontrados`);
      } catch (filterError) {
        console.error("‚ùå Erro ao filtrar cursos:", filterError);
      }
    }

    // üèôÔ∏è VERIFICAR CIDADES ESPECIAIS
    let cidadeEspecial = null;
    if (mencionaCuritibaGenerica(message)) {
      cidadeEspecial = "curitiba";
      console.log("üè¢ Detectado men√ß√£o gen√©rica a Curitiba");
    } else if (mencionaLondrinaGenerica(message)) {
      cidadeEspecial = "londrina";
      console.log("üè≠ Detectado men√ß√£o gen√©rica a Londrina");
    }

    // üì§ RESPOSTA FINAL
    const response = {
      success: true,
      message: botResponse,
      filtros: filtros,
      ...(cursosEncontrados && { cursos: cursosEncontrados }),
      ...(cidadeEspecial && { cidadeEspecial: cidadeEspecial }),
    };

    console.log("‚úÖ Resposta preparada, enviando...");
    console.log("üì® === FIM DA REQUISI√á√ÉO ===\n");

    return res.json(response);
  } catch (error) {
    // üö® TRATAMENTO DE ERRO COMPLETO
    console.error("‚ùå === ERRO CAPTURADO ===");
    console.error("‚ùå Mensagem:", error.message);
    console.error("‚ùå Stack:", error.stack);
    console.error("‚ùå Body da requisi√ß√£o:", req.body);
    console.error("‚ùå Headers da requisi√ß√£o:", req.headers);
    console.error("‚ùå =======================");

    return res.status(500).json({
      success: false,
      message: "Erro interno do servidor",
      error:
        process.env.NODE_ENV === "development" ? error.message : "Erro interno",
    });
  }
};

// ============================================
// üîß CONFIGURA√á√ÉO INICIAL
// ============================================

dotenv.config();
const app = express();
const PORT = process.env.PORT || 3000;

// ============================================
// üåê CONFIGURA√á√ÉO CORS ROBUSTA
// ============================================

const corsOptions = {
  origin: function (origin, callback) {
    // Lista de origens permitidas
    const allowedOrigins = [
      "http://localhost:3000",
      "https://www.senaipr.org.br",
      "https://senaipr.org.br",
      "http://localhost:3001",
      "http://localhost:5173",
      "http://localhost:3001",
      "http://127.0.0.1:5173",
      "http://127.0.0.1:3000",
      "https://web-api-chatbot-profissionalizante.vercel.app",
      "https://chatbot-senai.vercel.app",
      "*", // config cors robusta / libera tudo >  TODO  > depois do desenvolvimento, remova o "*"
      // Adicione outros dom√≠nios conforme necess√°rio
    ];

    // Permitir requisi√ß√µes sem origin (Postman, apps mobile, etc.)
    if (!origin) return callback(null, true);

    if (allowedOrigins.indexOf(origin) !== -1) {
      callback(null, true);
    } else {
      console.warn(`üö´ Origin bloqueada pelo CORS: ${origin}`);
      // Em desenvolvimento, permitir todas (mude para false em produ√ß√£o)
      callback(null, true);
    }
  },
  credentials: true,
  methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH"],
  allowedHeaders: [
    "Origin",
    "X-Requested-With",
    "Content-Type",
    "Accept",
    "Authorization",
    "Cache-Control",
    "Pragma",
  ],
  exposedHeaders: ["Content-Length"],
  maxAge: 86400, // 24 horas
};

// Aplicar CORS com configura√ß√µes
app.use(cors(corsOptions));

// ============================================
// üõ°Ô∏è MIDDLEWARE ADICIONAL DE CORS (Fallback)
// ============================================

app.use((req, res, next) => {
  // Headers CORS manuais como fallback
  res.header("Access-Control-Allow-Origin", req.headers.origin || "*");
  res.header("Access-Control-Allow-Credentials", "true");
  res.header(
    "Access-Control-Allow-Methods",
    "GET, POST, PUT, DELETE, OPTIONS, PATCH"
  );
  res.header(
    "Access-Control-Allow-Headers",
    "Origin, X-Requested-With, Content-Type, Accept, Authorization"
  );

  // Log da requisi√ß√£o
  console.log(
    `üì° ${req.method} ${req.path} - Origin: ${req.headers.origin || "N/A"}`
  );

  // Responder OPTIONS imediatamente (Preflight)
  if (req.method === "OPTIONS") {
    console.log("‚úÖ Preflight CORS aceito");
    return res.status(200).end();
  }

  next();
});

// ============================================
// üîÑ MIDDLEWARE DE PARSING
// ============================================

// Parse JSON
app.use(
  express.json({
    limit: "10mb",
    strict: true,
  })
);

// Parse URL-encoded
app.use(
  express.urlencoded({
    extended: true,
    limit: "10mb",
  })
);

// ============================================
// üìù MIDDLEWARE DE LOGGING
// ============================================

app.use((req, res, next) => {
  const timestamp = new Date().toISOString();
  console.log(`üïê [${timestamp}] ${req.method} ${req.url}`);

  if (req.body && Object.keys(req.body).length > 0) {
    console.log(`üì¶ Body:`, JSON.stringify(req.body, null, 2));
  }

  next();
});

// ============================================
// üè• HEALTH CHECK ROBUSTO
// ============================================

app.get("/health", async (req, res) => {
  try {
    // Testar conex√£o com banco
    const [result] = await pool.query("SELECT 1 as test");

    res.status(200).json({
      status: "OK",
      timestamp: new Date().toISOString(),
      uptime: process.uptime(),
      database: "Connected",
      version: "1.0.0",
      environment: process.env.NODE_ENV || "development",
    });
  } catch (error) {
    console.error("‚ùå Health check failed:", error);
    res.status(500).json({
      status: "ERROR",
      timestamp: new Date().toISOString(),
      database: "Disconnected",
      error: error.message,
    });
  }
});

// ============================================
// üåç ROTA RAIZ MELHORADA
// ============================================

app.get("/", (req, res) => {
  res.json({
    message: "ü§ñ API do Chatbot SENAI Paran√° est√° funcionando!",
    version: "1.0.0",
    timestamp: new Date().toISOString(),
    endpoints: {
      health: "/health",
      chat: "/api/chat",
      messages: "/api/messages",
      lead: "/api/lead",
    },
  });
});

// ============================================
// üß™ ENDPOINT DE TESTE CORS
// ============================================

app.get("/test-cors", (req, res) => {
  res.json({
    message: "‚úÖ CORS est√° funcionando!",
    origin: req.headers.origin,
    method: req.method,
    timestamp: new Date().toISOString(),
    headers: {
      "access-control-allow-origin": res.getHeader(
        "access-control-allow-origin"
      ),
      "access-control-allow-credentials": res.getHeader(
        "access-control-allow-credentials"
      ),
    },
  });
});

// ============================================
// üõ£Ô∏è ROTAS DA API
// ============================================

try {
  app.use("/api/chat", chatRoutes);
  app.use("/api/messages", messagesRoutes);
  // app.use("/api/auth", authRoutes);
  // app.use("/api/courses", coursesRoutes);
  app.use("/api/lead", leadRoutes);
  // app.use("/api/captcha", captchaRoutes);

  console.log("‚úÖ Todas as rotas carregadas com sucesso");
} catch (error) {
  console.error("‚ùå Erro ao carregar rotas:", error);
}

// ============================================
// üîß MIDDLEWARE DE TRATAMENTO DE ERROS
// ============================================

// 404 - Rota n√£o encontrada
app.use((req, res, next) => {
  // 404 handler - sem especificar path
  res.status(404).json({
    error: "Rota n√£o encontrada",
    method: req.method,
    url: req.originalUrl,
  });
});

// Tratamento de erros global
app.use((error, req, res, next) => {
  console.error("üí• Erro n√£o tratado:", error);

  // Log detalhado do erro
  console.error("Stack trace:", error.stack);
  console.error("Request details:", {
    method: req.method,
    url: req.url,
    headers: req.headers,
    body: req.body,
  });

  res.status(500).json({
    error: "Erro interno do servidor",
    message:
      process.env.NODE_ENV === "development"
        ? error.message
        : "Algo deu errado",
    timestamp: new Date().toISOString(),
  });
});

// ============================================
// üöÄ INICIALIZA√á√ÉO DO SERVIDOR
// ============================================

app.listen(PORT, async () => {
  try {
    // Testar conex√£o com banco
    console.log("üîå Testando conex√£o com banco de dados...");
    const [rows] = await pool.query("SELECT 1");
    console.log(`‚úÖ Conex√£o com o banco de dados OK.`);
  } catch (err) {
    console.error("‚ùå Erro ao conectar no banco:", err.message);
  }

  console.log("\nüöÄ ======================================");
  console.log(`ü§ñ Servidor rodando na porta ${PORT}`);
  console.log(`üåç Local: http://localhost:${PORT}`);
  console.log(`üè• Health: http://localhost:${PORT}/health`);
  console.log(`üß™ Test CORS: http://localhost:${PORT}/test-cors`);
  console.log(`üì° API: http://localhost:${PORT}/api`);
  console.log("üöÄ ======================================\n");
});

// ============================================
// üéØ TRATAMENTO DE ERROS N√ÉO CAPTURADOS
// ============================================

process.on("uncaughtException", (error) => {
  console.error("üí• Uncaught Exception:", error);
  process.exit(1);
});

process.on("unhandledRejection", (reason, promise) => {
  console.error("üí• Unhandled Rejection at:", promise, "reason:", reason);
  process.exit(1);
});

export default app;

// // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
// // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> NOVA VERS√ÉO TESTE 27/06/2025 <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
// // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

// import express from "express";
// import dotenv from "dotenv";
// import cors from "cors";
// import chatRoutes from "./src/routes/chat.routes.js";
// import messagesRoutes from "./src/routes/messages.routes.js";
// import leadRoutes from "./src/routes/lead.routes.js";
// import pool from "./src/config/db.js";

// // ============================================
// // üîß CONFIGURA√á√ÉO INICIAL
// // ============================================

// dotenv.config();
// const app = express();
// const PORT = process.env.PORT || 3000;

// // ============================================
// // üåê CONFIGURA√á√ÉO CORS ROBUSTA
// // ============================================

// const corsOptions = {
//   origin: "*", // ‚Üê LIBERA TODOS OS DOM√çNIOS
//   credentials: true,
//   methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH"],
//   allowedHeaders: [
//     "Origin",
//     "X-Requested-With",
//     "Content-Type",
//     "Accept",
//     "Authorization",
//     "Cache-Control",
//     "Pragma",
//   ],
//   exposedHeaders: ["Content-Length"],
//   maxAge: 86400, // 24 horas
// };

// // Aplicar CORS com configura√ß√µes
// app.use(cors(corsOptions));

// // ============================================
// // üõ°Ô∏è MIDDLEWARE ADICIONAL DE CORS (Simplificado)
// // ============================================

// app.use((req, res, next) => {
//   // Headers CORS manuais como fallback - LIBERAR TUDO
//   res.header("Access-Control-Allow-Origin", "*"); // ‚Üê LIBERA TUDO
//   res.header("Access-Control-Allow-Credentials", "true");
//   res.header(
//     "Access-Control-Allow-Methods",
//     "GET, POST, PUT, DELETE, OPTIONS, PATCH"
//   );
//   res.header(
//     "Access-Control-Allow-Headers",
//     "Origin, X-Requested-With, Content-Type, Accept, Authorization"
//   );

//   // Log da requisi√ß√£o
//   console.log(
//     `üì° ${req.method} ${req.path} - Origin: ${req.headers.origin || "N/A"}`
//   );

//   // Responder OPTIONS imediatamente (Preflight)
//   if (req.method === "OPTIONS") {
//     console.log("‚úÖ Preflight CORS aceito");
//     return res.status(200).end();
//   }

//   next();
// });

// // ============================================
// // üîÑ MIDDLEWARE DE PARSING
// // ============================================

// // Parse JSON
// app.use(
//   express.json({
//     limit: "10mb",
//     strict: true,
//   })
// );

// // Parse URL-encoded
// app.use(
//   express.urlencoded({
//     extended: true,
//     limit: "10mb",
//   })
// );

// // ============================================
// // üìù MIDDLEWARE DE LOGGING
// // ============================================

// app.use((req, res, next) => {
//   const timestamp = new Date().toISOString();
//   console.log(`üïê [${timestamp}] ${req.method} ${req.url}`);

//   if (req.body && Object.keys(req.body).length > 0) {
//     console.log(`üì¶ Body:`, JSON.stringify(req.body, null, 2));
//   }

//   next();
// });

// // ============================================
// // üè• HEALTH CHECK
// // ============================================

// app.get("/health", async (req, res) => {
//   try {
//     // Testar conex√£o com banco
//     const [result] = await pool.query("SELECT 1 as test");

//     res.status(200).json({
//       status: "OK",
//       timestamp: new Date().toISOString(),
//       uptime: process.uptime(),
//       database: "Connected",
//       version: "1.0.0",
//       environment: process.env.NODE_ENV || "development",
//     });
//   } catch (error) {
//     console.error("‚ùå Health check failed:", error);
//     res.status(500).json({
//       status: "ERROR",
//       timestamp: new Date().toISOString(),
//       database: "Disconnected",
//       error: error.message,
//     });
//   }
// });

// // ============================================
// // üåç ROTA RAIZ
// // ============================================

// app.get("/", (req, res) => {
//   res.json({
//     message: "ü§ñ API do Chatbot SENAI Paran√° est√° funcionando!",
//     version: "1.0.0",
//     timestamp: new Date().toISOString(),
//     endpoints: {
//       health: "/health",
//       chat: "/api/chat",
//       messages: "/api/messages",
//       lead: "/api/lead",
//     },
//   });
// });

// // ============================================
// // üß™ ENDPOINT DE TESTE CORS
// // ============================================

// app.get("/test-cors", (req, res) => {
//   res.json({
//     message: "‚úÖ CORS est√° funcionando!",
//     origin: req.headers.origin,
//     method: req.method,
//     timestamp: new Date().toISOString(),
//     headers: {
//       "access-control-allow-origin": res.getHeader(
//         "access-control-allow-origin"
//       ),
//       "access-control-allow-credentials": res.getHeader(
//         "access-control-allow-credentials"
//       ),
//     },
//   });
// });

// // ============================================
// // üõ£Ô∏è ROTAS DA API
// // ============================================

// try {
//   app.use("/api/chat", chatRoutes);
//   app.use("/api/messages", messagesRoutes);
//   app.use("/api/lead", leadRoutes);
//   console.log("‚úÖ Todas as rotas carregadas com sucesso");
// } catch (error) {
//   console.error("‚ùå Erro ao carregar rotas:", error);
// }

// // ============================================
// // üîß MIDDLEWARE DE TRATAMENTO DE ERROS
// // ============================================

// // 404 - Rota n√£o encontrada
// app.use((req, res, next) => {
//   // 404 handler - sem especificar path
//   res.status(404).json({
//     error: "Rota n√£o encontrada",
//     method: req.method,
//     url: req.originalUrl,
//   });
// });

// // Tratamento de erros global
// app.use((error, req, res, next) => {
//   console.error("üí• Erro n√£o tratado:", error);

//   // Log detalhado do erro
//   console.error("Stack trace:", error.stack);
//   console.error("Request details:", {
//     method: req.method,
//     url: req.url,
//     headers: req.headers,
//     body: req.body,
//   });

//   res.status(500).json({
//     error: "Erro interno do servidor",
//     message:
//       process.env.NODE_ENV === "development"
//         ? error.message
//         : "Algo deu errado",
//     timestamp: new Date().toISOString(),
//   });
// });

// // ============================================
// // üöÄ INICIALIZA√á√ÉO DO SERVIDOR
// // ============================================

// app.listen(PORT, async () => {
//   try {
//     // Testar conex√£o com banco
//     console.log("üîå Testando conex√£o com banco de dados...");
//     const [rows] = await pool.query("SELECT 1");
//     console.log(`‚úÖ Conex√£o com o banco de dados OK.`);
//   } catch (err) {
//     console.error("‚ùå Erro ao conectar no banco:", err.message);
//   }

//   console.log("\nüöÄ ======================================");
//   console.log(`ü§ñ Servidor rodando na porta ${PORT}`);
//   console.log(`üåç Local: http://localhost:${PORT}`);
//   console.log(`üè• Health: http://localhost:${PORT}/health`);
//   console.log(`üß™ Test CORS: http://localhost:${PORT}/test-cors`);
//   console.log(`üì° API: http://localhost:${PORT}/api`);
//   console.log("üöÄ ======================================\n");
// });

// // ============================================
// // üéØ TRATAMENTO DE ERROS N√ÉO CAPTURADOS
// // ============================================

// process.on("uncaughtException", (error) => {
//   console.error("üí• Uncaught Exception:", error);
//   process.exit(1);
// });

// process.on("unhandledRejection", (reason, promise) => {
//   console.error("üí• Unhandled Rejection at:", promise, "reason:", reason);
//   process.exit(1);
// });

// export default app;
